{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["var mr_firstSectionHeight,\n    mr_nav,\n    mr_navOuterHeight,\n    mr_navScrolled = false,\n    mr_navFixed = false,\n    mr_outOfSight = false,\n    mr_floatingProjectSections,\n    mr_scrollTop = 0;\n\n$(document).ready(function() {\n    \"use strict\";\n\n    // Smooth scroll to inner links\n\n    $('.inner-link').each(function(){\n        var href = $(this).attr('href');\n        if(href.charAt(0) !== \"#\"){\n            $(this).removeClass('inner-link');\n        }\n    });\n\n\tif($('.inner-link').length){\n\t\t$('.inner-link').smoothScroll({\n\t\t\toffset: -55,\n\t\t\tspeed: 800\n\t\t});\n    }\n\n    // Update scroll variable for scrolling functions\n\n    addEventListener('scroll', function() {\n        mr_scrollTop = window.pageYOffset;\n    }, false);\n\n    // Append .background-image-holder <img>'s as CSS backgrounds\n\n    $('.background-image-holder').each(function() {\n        var imgSrc = $(this).children('img').attr('src');\n        $(this).css('background', 'url(\"' + imgSrc + '\")');\n        $(this).children('img').hide();\n        $(this).css('background-position', 'initial');\n    });\n\n    // Fade in background images\n\n    setTimeout(function() {\n        $('.background-image-holder').each(function() {\n            $(this).addClass('fadeIn');\n        });\n    }, 200);\n\n    // Initialize Tooltips\n\n    $('[data-toggle=\"tooltip\"]').tooltip();\n\n    // Icon bulleted lists\n\n    $('ul[data-bullet]').each(function(){\n        var bullet = $(this).attr('data-bullet');\n        $(this).find('li').prepend('<i class=\"'+bullet+'\"></i>');\n    });\n\n    // Progress Bars\n\n    $('.progress-bar').each(function() {\n        $(this).css('width', $(this).attr('data-progress') + '%');\n    });\n\n    // Navigation\n\n    if (!$('nav').hasClass('fixed') && !$('nav').hasClass('absolute')) {\n\n        // Make nav container height of nav\n\n        $('.nav-container').css('min-height', $('nav').outerHeight(true));\n\n        $(window).resize(function() {\n            $('.nav-container').css('min-height', $('nav').outerHeight(true));\n        });\n\n        // Compensate the height of parallax element for inline nav\n\n        if ($(window).width() > 768) {\n            $('.parallax:nth-of-type(1) .background-image-holder').css('top', -($('nav').outerHeight(true)));\n        }\n\n        // Adjust fullscreen elements\n\n        if ($(window).width() > 768) {\n            $('section.fullscreen:nth-of-type(1)').css('height', ($(window).height() - $('nav').outerHeight(true)));\n        }\n\n    } else {\n        $('body').addClass('nav-is-overlay');\n    }\n\n    if ($('nav').hasClass('bg-dark')) {\n        $('.nav-container').addClass('bg-dark');\n    }\n\n\n    // Fix nav to top while scrolling\n\n    mr_nav = $('body .nav-container nav:first');\n    mr_navOuterHeight = $('body .nav-container nav:first').outerHeight();\n    window.addEventListener(\"scroll\", updateNav, false);\n\n    // Menu dropdown positioning\n\n    $('.menu > li > ul').each(function() {\n        var menu = $(this).offset();\n        var farRight = menu.left + $(this).outerWidth(true);\n        if (farRight > $(window).width() && !$(this).hasClass('mega-menu')) {\n            $(this).addClass('make-right');\n        } else if (farRight > $(window).width() && $(this).hasClass('mega-menu')) {\n            var isOnScreen = $(window).width() - menu.left;\n            var difference = $(this).outerWidth(true) - isOnScreen;\n            $(this).css('margin-left', -(difference));\n        }\n    });\n\n    // Mobile Menu\n\n    $('.mobile-toggle').click(function() {\n        $('.nav-bar').toggleClass('nav-open');\n        $(this).toggleClass('active');\n    });\n\n    $('.menu li').click(function(e) {\n        if (!e) e = window.event;\n        e.stopPropagation();\n        if ($(this).find('ul').length) {\n            $(this).toggleClass('toggle-sub');\n        } else {\n            $(this).parents('.toggle-sub').removeClass('toggle-sub');\n        }\n    });\n\n    $('.module.widget-handle').click(function() {\n        $(this).toggleClass('toggle-widget-handle');\n    });\n\n    $('.search-widget-handle .search-form input').click(function(e){\n        if (!e) e = window.event;\n        e.stopPropagation();\n    });\n\n    // Offscreen Nav\n\n    if($('.offscreen-toggle').length){\n    \t$('body').addClass('has-offscreen-nav');\n    }\n    else{\n        $('body').removeClass('has-offscreen-nav');\n    }\n\n    $('.offscreen-toggle').click(function(){\n    \t$('.main-container').toggleClass('reveal-nav');\n    \t$('nav').toggleClass('reveal-nav');\n    \t$('.offscreen-container').toggleClass('reveal-nav');\n    });\n\n    $('.main-container').click(function(){\n    \tif($(this).hasClass('reveal-nav')){\n    \t\t$(this).removeClass('reveal-nav');\n    \t\t$('.offscreen-container').removeClass('reveal-nav');\n    \t\t$('nav').removeClass('reveal-nav');\n    \t}\n    });\n\n    $('.offscreen-container a').click(function(){\n    \t$('.offscreen-container').removeClass('reveal-nav');\n    \t$('.main-container').removeClass('reveal-nav');\n    \t$('nav').removeClass('reveal-nav');\n    });\n\n    // Populate filters\n\n    $('.projects').each(function() {\n\n        var filters = \"\";\n\n        $(this).find('.project').each(function() {\n\n            var filterTags = $(this).attr('data-filter').split(',');\n\n            filterTags.forEach(function(tagName) {\n                if (filters.indexOf(tagName) == -1) {\n                    filters += '<li data-filter=\"' + tagName + '\">' + capitaliseFirstLetter(tagName) + '</li>';\n                }\n            });\n            $(this).closest('.projects')\n                .find('ul.filters').empty().append('<li data-filter=\"all\" class=\"active\">All</li>').append(filters);\n        });\n    });\n\n    $('.filters li').click(function() {\n        var filter = $(this).attr('data-filter');\n        $(this).closest('.filters').find('li').removeClass('active');\n        $(this).addClass('active');\n\n        $(this).closest('.projects').find('.project').each(function() {\n            var filters = $(this).data('filter');\n\n            if (filters.indexOf(filter) == -1) {\n                $(this).addClass('inactive');\n            } else {\n                $(this).removeClass('inactive');\n            }\n        });\n\n        if (filter == 'all') {\n            $(this).closest('.projects').find('.project').removeClass('inactive');\n        }\n    });\n\n    // Twitter Feed\n\n    $('.tweets-feed').each(function(index) {\n        $(this).attr('id', 'tweets-' + index);\n    }).each(function(index) {\n\n        function handleTweets(tweets) {\n            var x = tweets.length;\n            var n = 0;\n            var element = document.getElementById('tweets-' + index);\n            var html = '<ul class=\"slides\">';\n            while (n < x) {\n                html += '<li>' + tweets[n] + '</li>';\n                n++;\n            }\n            html += '</ul>';\n            element.innerHTML = html;\n            return html;\n        }\n\n        twitterFetcher.fetch($('#tweets-' + index).attr('data-widget-id'), '', 5, true, true, true, '', false, handleTweets);\n\n    });\n\n    // Instagram Feed\n\n    if($('.instafeed').length){\n    \tjQuery.fn.spectragram.accessData = {\n\t\t\taccessToken: '1406933036.fedaafa.feec3d50f5194ce5b705a1f11a107e0b',\n\t\t\tclientID: 'fedaafacf224447e8aef74872d3820a1'\n\t\t};\n\n        $('.instafeed').each(function() {\n            var feedID = $(this).attr('data-user-name') + '_';\n            $(this).children('ul').spectragram('getUserFeed', {\n                query: feedID,\n                max: 12\n            });\n        });\n    }\n\n\n\n    // Flickr Feeds\n\n    if($('.flickr-feed').length){\n        $('.flickr-feed').each(function(){\n            var userID = $(this).attr('data-user-id');\n            var albumID = $(this).attr('data-album-id');\n            $(this).flickrPhotoStream({ id: userID, setId: albumID, container: '<li class=\"masonry-item\" />' });\n        });\n    }\n\n    // Image Sliders\n\n    $('.slider-all-controls').flexslider({\n        start: function(slider){\n            if(slider.find('.slides li:first-child').find('.fs-vid-background video').length){\n               slider.find('.slides li:first-child').find('.fs-vid-background video').get(0).play();\n            }\n        },\n        after: function(slider){\n            if(slider.find('.fs-vid-background video').length){\n                if(slider.find('li:not(.flex-active-slide)').find('.fs-vid-background video').length){\n                    slider.find('li:not(.flex-active-slide)').find('.fs-vid-background video').get(0).pause();\n                }\n                if(slider.find('.flex-active-slide').find('.fs-vid-background video').length){\n                    slider.find('.flex-active-slide').find('.fs-vid-background video').get(0).play();\n                }\n            }\n        }\n    });\n    $('.slider-paging-controls').flexslider({\n        animation: \"slide\",\n        directionNav: false\n    });\n    $('.slider-arrow-controls').flexslider({\n        controlNav: false\n    });\n    $('.slider-thumb-controls .slides li').each(function() {\n        var imgSrc = $(this).find('img').attr('src');\n        $(this).attr('data-thumb', imgSrc);\n    });\n    $('.slider-thumb-controls').flexslider({\n        animation: \"slide\",\n        controlNav: \"thumbnails\",\n        directionNav: true\n    });\n    $('.logo-carousel').flexslider({\n        minItems: 1,\n        maxItems: 4,\n        move: 1,\n        itemWidth: 200,\n        itemMargin: 0,\n        animation: \"slide\",\n        slideshow: true,\n        slideshowSpeed: 3000,\n        directionNav: false,\n        controlNav: false\n    });\n\n    // Lightbox gallery titles\n\n    $('.lightbox-grid li a').each(function(){\n    \tvar galleryTitle = $(this).closest('.lightbox-grid').attr('data-gallery-title');\n    \t$(this).attr('data-lightbox', galleryTitle);\n    });\n\n    // Prepare embedded video modals\n\n    $('iframe[data-provider]').each(function(){\n        var provider = jQuery(this).attr('data-provider');\n        var videoID = jQuery(this).attr('data-video-id');\n        var autoplay = jQuery(this).attr('data-autoplay');\n        var vidURL = '';\n\n        if(provider == 'vimeo'){\n            vidURL = \"http://player.vimeo.com/video/\"+videoID+\"?badge=0&title=0&byline=0&title=0&autoplay=\"+autoplay;\n            $(this).attr('data-src', vidURL);\n        }else if (provider == 'youtube'){\n            vidURL = \"https://www.youtube.com/embed/\"+videoID+\"?showinfo=0&autoplay=\"+autoplay;\n            $(this).attr('data-src', vidURL);\n        }else{\n            console.log('Only Vimeo and Youtube videos are supported at this time');\n        }\n    });\n\n    // Multipurpose Modals\n\n    jQuery('.foundry_modal[modal-link]').remove();\n\n    if($('.foundry_modal').length && (!jQuery('.modal-screen').length)){\n        // Add a div.modal-screen if there isn't already one there.\n        var modalScreen = jQuery('<div />').addClass('modal-screen').appendTo('body');\n\n    }\n\n    jQuery('.foundry_modal').click(function(){\n        jQuery(this).addClass('modal-acknowledged');\n    });\n\n    $('.modal-container:not([modal-link])').each(function(index) {\n        if(jQuery(this).find('iframe[src]').length){\n        \tjQuery(this).find('.foundry_modal').addClass('iframe-modal');\n        \tvar iframe = jQuery(this).find('iframe');\n        \tiframe.attr('data-src',iframe.attr('src'));\n            iframe.attr('src', '');\n\n        }\n        jQuery(this).find('.btn-modal').attr('modal-link', index);\n\n        // Only clone and append to body if there isn't already one there\n        if(!jQuery('.foundry_modal[modal-link=\"'+index+'\"]').length){\n            jQuery(this).find('.foundry_modal').clone().appendTo('body').attr('modal-link', index).prepend(jQuery('<i class=\"ti-close close-modal\">'));\n        }\n    });\n\n    $('.btn-modal').unbind('click').click(function(){\n    \tvar linkedModal = jQuery('.foundry_modal[modal-link=\"' + jQuery(this).attr('modal-link') + '\"]');\n        jQuery('.modal-screen').toggleClass('reveal-modal');\n        if(linkedModal.find('iframe').length){\n            if(linkedModal.find('iframe').attr('data-autoplay') === '1'){\n                var autoplayMsg = '&autoplay=1'\n            }\n        \tlinkedModal.find('iframe').attr('src', (linkedModal.find('iframe').attr('data-src') + autoplayMsg));\n        }\n        linkedModal.toggleClass('reveal-modal');\n        return false;\n    });\n\n    // Autoshow modals\n\n\t$('.foundry_modal[data-time-delay]').each(function(){\n\t\tvar modal = $(this);\n\t\tvar delay = modal.attr('data-time-delay');\n\t\tmodal.prepend($('<i class=\"ti-close close-modal\">'));\n    \tif(typeof modal.attr('data-cookie') != \"undefined\"){\n        \tif(!mr_cookies.hasItem(modal.attr('data-cookie'))){\n                setTimeout(function(){\n        \t\t\tmodal.addClass('reveal-modal');\n        \t\t\t$('.modal-screen').addClass('reveal-modal');\n        \t\t},delay);\n            }\n        }else{\n            setTimeout(function(){\n                modal.addClass('reveal-modal');\n                $('.modal-screen').addClass('reveal-modal');\n            },delay);\n        }\n\t});\n\n    // Autoclose modals\n\n    $('.foundry_modal[data-hide-after]').each(function(){\n        var modal = $(this);\n        var delay = modal.attr('data-hide-after');\n        if(typeof modal.attr('data-cookie') != \"undefined\"){\n            if(!mr_cookies.hasItem(modal.attr('data-cookie'))){\n                setTimeout(function(){\n                if(!modal.hasClass('modal-acknowledged')){\n                    modal.removeClass('reveal-modal');\n                    $('.modal-screen').removeClass('reveal-modal');\n                }\n                },delay);\n            }\n        }else{\n            setTimeout(function(){\n                if(!modal.hasClass('modal-acknowledged')){\n                    modal.removeClass('reveal-modal');\n                    $('.modal-screen').removeClass('reveal-modal');\n                }\n            },delay);\n        }\n    });\n\n    jQuery('.close-modal:not(.modal-strip .close-modal)').unbind('click').click(function(){\n    \tvar modal = jQuery(this).closest('.foundry_modal');\n        modal.toggleClass('reveal-modal');\n        if(typeof modal.attr('data-cookie') !== \"undefined\"){\n            mr_cookies.setItem(modal.attr('data-cookie'), \"true\", Infinity);\n        }\n    \tif(modal.find('iframe').length){\n            modal.find('iframe').attr('src', '');\n        }\n        jQuery('.modal-screen').removeClass('reveal-modal');\n    });\n\n    jQuery('.modal-screen').unbind('click').click(function(){\n        if(jQuery('.foundry_modal.reveal-modal').find('iframe').length){\n            jQuery('.foundry_modal.reveal-modal').find('iframe').attr('src', '');\n        }\n    \tjQuery('.foundry_modal.reveal-modal').toggleClass('reveal-modal');\n    \tjQuery(this).toggleClass('reveal-modal');\n    });\n\n    jQuery(document).keyup(function(e) {\n\t\t if (e.keyCode == 27) { // escape key maps to keycode `27`\n            if(jQuery('.foundry_modal').find('iframe').length){\n                jQuery('.foundry_modal').find('iframe').attr('src', '');\n            }\n\t\t\tjQuery('.foundry_modal').removeClass('reveal-modal');\n\t\t\tjQuery('.modal-screen').removeClass('reveal-modal');\n\t\t}\n\t});\n\n    // Modal Strips\n\n    jQuery('.modal-strip').each(function(){\n    \tif(!jQuery(this).find('.close-modal').length){\n    \t\tjQuery(this).append(jQuery('<i class=\"ti-close close-modal\">'));\n    \t}\n    \tvar modal = jQuery(this);\n\n        if(typeof modal.attr('data-cookie') != \"undefined\"){\n\n            if(!mr_cookies.hasItem(modal.attr('data-cookie'))){\n            \tsetTimeout(function(){\n            \t\tmodal.addClass('reveal-modal');\n            \t},1000);\n            }\n        }else{\n            setTimeout(function(){\n                    modal.addClass('reveal-modal');\n            },1000);\n        }\n    });\n\n    jQuery('.modal-strip .close-modal').click(function(){\n        var modal = jQuery(this).closest('.modal-strip');\n        if(typeof modal.attr('data-cookie') != \"undefined\"){\n            mr_cookies.setItem(modal.attr('data-cookie'), \"true\", Infinity);\n        }\n    \tjQuery(this).closest('.modal-strip').removeClass('reveal-modal');\n    \treturn false;\n    });\n\n\n    // Video Modals\n\n    jQuery('.close-iframe').click(function() {\n        jQuery(this).closest('.modal-video').removeClass('reveal-modal');\n        jQuery(this).siblings('iframe').attr('src', '');\n        jQuery(this).siblings('video').get(0).pause();\n    });\n\n    // Checkboxes\n\n    $('.checkbox-option').on(\"click\",function() {\n        $(this).toggleClass('checked');\n        var checkbox = $(this).find('input');\n        if (checkbox.prop('checked') === false) {\n            checkbox.prop('checked', true);\n        } else {\n            checkbox.prop('checked', false);\n        }\n    });\n\n    // Radio Buttons\n\n    $('.radio-option').click(function() {\n\n        var checked = $(this).hasClass('checked'); // Get the current status of the radio\n\n        var name = $(this).find('input').attr('name'); // Get the name of the input clicked\n\n        if (!checked) {\n\n            $('input[name=\"'+name+'\"]').parent().removeClass('checked');\n\n            $(this).addClass('checked');\n\n            $(this).find('input').prop('checked', true);\n\n        }\n\n    });\n\n\n    // Accordions\n\n    $('.accordion li').click(function() {\n        if ($(this).closest('.accordion').hasClass('one-open')) {\n            $(this).closest('.accordion').find('li').removeClass('active');\n            $(this).addClass('active');\n        } else {\n            $(this).toggleClass('active');\n        }\n    });\n\n    // Tabbed Content\n\n    $('.tabbed-content').each(function() {\n        $(this).append('<ul class=\"content\"></ul>');\n    });\n\n    $('.tabs li').each(function() {\n        var originalTab = $(this),\n            activeClass = \"\";\n        if (originalTab.is('.tabs>li:first-child')) {\n            activeClass = ' class=\"active\"';\n        }\n        var tabContent = originalTab.find('.tab-content').detach().wrap('<li' + activeClass + '></li>').parent();\n        originalTab.closest('.tabbed-content').find('.content').append(tabContent);\n    });\n\n    $('.tabs li').click(function() {\n        $(this).closest('.tabs').find('li').removeClass('active');\n        $(this).addClass('active');\n        var liIndex = $(this).index() + 1;\n        $(this).closest('.tabbed-content').find('.content>li').removeClass('active');\n        $(this).closest('.tabbed-content').find('.content>li:nth-of-type(' + liIndex + ')').addClass('active');\n    });\n\n    // Local Videos\n\n    $('section').closest('body').find('.local-video-container .play-button').click(function() {\n        $(this).siblings('.background-image-holder').removeClass('fadeIn');\n        $(this).siblings('.background-image-holder').css('z-index', -1);\n        $(this).css('opacity', 0);\n        $(this).siblings('video').get(0).play();\n    });\n\n    // Youtube Videos\n\n    $('section').closest('body').find('.player').each(function() {\n        var section = $(this).closest('section');\n        section.find('.container').addClass('fadeOut');\n        var src = $(this).attr('data-video-id');\n        var startat = $(this).attr('data-start-at');\n        $(this).attr('data-property', \"{videoURL:'http://youtu.be/\" + src + \"',containment:'self',autoPlay:true, mute:true, startAt:\" + startat + \", opacity:1, showControls:false}\");\n    });\n\n\tif($('.player').length){\n        $('.player').each(function(){\n\n            var section = $(this).closest('section');\n            var player = section.find('.player');\n            player.YTPlayer();\n            player.on(\"YTPStart\",function(e){\n                section.find('.container').removeClass('fadeOut');\n                section.find('.masonry-loader').addClass('fadeOut');\n            });\n\n        });\n    }\n\n    // Interact with Map once the user has clicked (to prevent scrolling the page = zooming the map\n\n    $('.map-holder').click(function() {\n        $(this).addClass('interact');\n    });\n\n    if($('.map-holder').length){\n    \t$(window).scroll(function() {\n\t\t\tif ($('.map-holder.interact').length) {\n\t\t\t\t$('.map-holder.interact').removeClass('interact');\n\t\t\t}\n\t\t});\n    }\n\n    // Countdown Timers\n\n    if ($('.countdown').length) {\n        $('.countdown').each(function() {\n            var date = $(this).attr('data-date');\n            $(this).countdown(date, function(event) {\n                $(this).text(\n                    event.strftime('%D days %H:%M:%S')\n                );\n            });\n        });\n    }\n\n    //                                                            //\n    //                                                            //\n    // Contact form code                                          //\n    //                                                            //\n    //                                                            //\n\n    $('form.form-email, form.form-newsletter').submit(function(e) {\n\n        // return false so form submits through jQuery rather than reloading page.\n        if (e.preventDefault) e.preventDefault();\n        else e.returnValue = false;\n\n        var thisForm = $(this).closest('form.form-email, form.form-newsletter'),\n            submitButton = thisForm.find('button[type=\"submit\"]'),\n            error = 0,\n            originalError = thisForm.attr('original-error'),\n            preparedForm, iFrame, userEmail, userFullName, userFirstName, userLastName, successRedirect, formError, formSuccess;\n\n        // Mailchimp/Campaign Monitor Mail List Form Scripts\n        iFrame = $(thisForm).find('iframe.mail-list-form');\n\n        thisForm.find('.form-error, .form-success').remove();\n        submitButton.attr('data-text', submitButton.text());\n        thisForm.append('<div class=\"form-error\" style=\"display: none;\">' + thisForm.attr('data-error') + '</div>');\n        thisForm.append('<div class=\"form-success\" style=\"display: none;\">' + thisForm.attr('data-success') + '</div>');\n        formError = thisForm.find('.form-error');\n        formSuccess = thisForm.find('.form-success');\n        thisForm.addClass('attempted-submit');\n\n        // Do this if there is an iframe, and it contains usable Mail Chimp / Campaign Monitor iframe embed code\n        if ((iFrame.length) && (typeof iFrame.attr('srcdoc') !== \"undefined\") && (iFrame.attr('srcdoc') !== \"\")) {\n\n            console.log('Mail list form signup detected.');\n            if (typeof originalError !== typeof undefined && originalError !== false) {\n                formError.html(originalError);\n            }\n            userEmail = $(thisForm).find('.signup-email-field').val();\n            userFullName = $(thisForm).find('.signup-name-field').val();\n            if ($(thisForm).find('input.signup-first-name-field').length) {\n                userFirstName = $(thisForm).find('input.signup-first-name-field').val();\n            } else {\n                userFirstName = $(thisForm).find('.signup-name-field').val();\n            }\n            userLastName = $(thisForm).find('.signup-last-name-field').val();\n\n            // validateFields returns 1 on error;\n            if (validateFields(thisForm) !== 1) {\n                preparedForm = prepareSignup(iFrame);\n\n                preparedForm.find('#mce-EMAIL, #fieldEmail').val(userEmail);\n                preparedForm.find('#mce-LNAME, #fieldLastName').val(userLastName);\n                preparedForm.find('#mce-FNAME, #fieldFirstName').val(userFirstName);\n                preparedForm.find('#mce-NAME, #fieldName').val(userFullName);\n                thisForm.removeClass('attempted-submit');\n\n                // Hide the error if one was shown\n                formError.fadeOut(200);\n                // Create a new loading spinner in the submit button.\n                submitButton.html(jQuery('<div />').addClass('form-loading')).attr('disabled', 'disabled');\n\n                try{\n                    $.ajax({\n                        url: preparedForm.attr('action'),\n                        crossDomain: true,\n                        data: preparedForm.serialize(),\n                        method: \"GET\",\n                        cache: false,\n                        dataType: 'json',\n                        contentType: 'application/json; charset=utf-8',\n                        success: function(data){\n                            // Request was a success, what was the response?\n                            if (data.result != \"success\" && data.Status != 200) {\n\n                                // Error from Mail Chimp or Campaign Monitor\n\n                                // Keep the current error text in a data attribute on the form\n                                formError.attr('original-error', formError.text());\n                                // Show the error with the returned error text.\n                                formError.html(data.msg).fadeIn(1000);\n                                formSuccess.fadeOut(1000);\n\n                                submitButton.html(submitButton.attr('data-text')).removeAttr('disabled');\n                            } else {\n\n                                // Got Success from Mail Chimp\n\n                                submitButton.html(submitButton.attr('data-text')).removeAttr('disabled');\n\n                                successRedirect = thisForm.attr('success-redirect');\n                                // For some browsers, if empty `successRedirect` is undefined; for others,\n                                // `successRedirect` is false.  Check for both.\n                                if (typeof successRedirect !== typeof undefined && successRedirect !== false && successRedirect !== \"\") {\n                                    window.location = successRedirect;\n                                }\n\n                                thisForm.find('input[type=\"text\"]').val(\"\");\n                                thisForm.find('textarea').val(\"\");\n                                formSuccess.fadeIn(1000);\n\n                                formError.fadeOut(1000);\n                                setTimeout(function() {\n                                    formSuccess.fadeOut(500);\n                                }, 5000);\n                            }\n                        }\n                    });\n                }catch(err){\n                    // Keep the current error text in a data attribute on the form\n                    formError.attr('original-error', formError.text());\n                    // Show the error with the returned error text.\n                    formError.html(err.message).fadeIn(1000);\n                    formSuccess.fadeOut(1000);\n                    setTimeout(function() {\n                        formError.fadeOut(500);\n                    }, 5000);\n\n                    submitButton.html(submitButton.attr('data-text')).removeAttr('disabled');\n                }\n\n\n\n            } else {\n                formError.fadeIn(1000);\n                setTimeout(function() {\n                    formError.fadeOut(500);\n                }, 5000);\n            }\n        } else {\n            // If no iframe detected then this is treated as an email form instead.\n            console.log('Send email form detected.');\n            if (typeof originalError !== typeof undefined && originalError !== false) {\n                formError.text(originalError);\n            }\n\n            error = validateFields(thisForm);\n\n            if (error === 1) {\n                formError.fadeIn(200);\n                setTimeout(function() {\n                    formError.fadeOut(500);\n                }, 3000);\n            } else {\n\n                thisForm.removeClass('attempted-submit');\n\n                // Hide the error if one was shown\n                formError.fadeOut(200);\n\n                // Create a new loading spinner in the submit button.\n                submitButton.html(jQuery('<div />').addClass('form-loading')).attr('disabled', 'disabled');\n\n                jQuery.ajax({\n                    type: \"POST\",\n                    url: \"mail/mail.php\",\n                    data: thisForm.serialize()+\"&url=\"+window.location.href,\n                    success: function(response) {\n                        // Swiftmailer always sends back a number representing numner of emails sent.\n                        // If this is numeric (not Swift Mailer error text) AND greater than 0 then show success message.\n\n                        submitButton.html(submitButton.attr('data-text')).removeAttr('disabled');\n\n                        if ($.isNumeric(response)) {\n                            if (parseInt(response) > 0) {\n                                // For some browsers, if empty 'successRedirect' is undefined; for others,\n                                // 'successRedirect' is false.  Check for both.\n                                successRedirect = thisForm.attr('success-redirect');\n                                if (typeof successRedirect !== typeof undefined && successRedirect !== false && successRedirect !== \"\") {\n                                    window.location = successRedirect;\n                                }\n\n\n                                thisForm.find('input[type=\"text\"]').val(\"\");\n                                thisForm.find('textarea').val(\"\");\n                                thisForm.find('.form-success').fadeIn(1000);\n\n                                formError.fadeOut(1000);\n                                setTimeout(function() {\n                                    formSuccess.fadeOut(500);\n                                }, 5000);\n                            }\n                        }\n                        // If error text was returned, put the text in the .form-error div and show it.\n                        else {\n                            // Keep the current error text in a data attribute on the form\n                            formError.attr('original-error', formError.text());\n                            // Show the error with the returned error text.\n                            formError.text(response).fadeIn(1000);\n                            formSuccess.fadeOut(1000);\n                        }\n                    },\n                    error: function(errorObject, errorText, errorHTTP) {\n                        // Keep the current error text in a data attribute on the form\n                        formError.attr('original-error', formError.text());\n                        // Show the error with the returned error text.\n                        formError.text(errorHTTP).fadeIn(1000);\n                        formSuccess.fadeOut(1000);\n                        submitButton.html(submitButton.attr('data-text')).removeAttr('disabled');\n                    }\n                });\n            }\n        }\n        return false;\n    });\n\n    $('.validate-required, .validate-email').on('blur change', function() {\n        validateFields($(this).closest('form'));\n    });\n\n    $('form').each(function() {\n        if ($(this).find('.form-error').length) {\n            $(this).attr('original-error', $(this).find('.form-error').text());\n        }\n    });\n\n    function validateFields(form) {\n            var name, error, originalErrorMessage;\n\n            $(form).find('.validate-required[type=\"checkbox\"]').each(function() {\n                if (!$('[name=\"' + $(this).attr('name') + '\"]:checked').length) {\n                    error = 1;\n                    name = $(this).attr('name').replace('[]', '');\n                    form.find('.form-error').text('Please tick at least one ' + name + ' box.');\n                }\n            });\n\n            $(form).find('.validate-required').each(function() {\n                if ($(this).val() === '') {\n                    $(this).addClass('field-error');\n                    error = 1;\n                } else {\n                    $(this).removeClass('field-error');\n                }\n            });\n\n            $(form).find('.validate-email').each(function() {\n                if (!(/(.+)@(.+){2,}\\.(.+){2,}/.test($(this).val()))) {\n                    $(this).addClass('field-error');\n                    error = 1;\n                } else {\n                    $(this).removeClass('field-error');\n                }\n            });\n\n            if (!form.find('.field-error').length) {\n                form.find('.form-error').fadeOut(1000);\n            }\n\n            return error;\n        }\n\n    //\n    //\n    // End contact form code\n    //\n    //\n\n\n    // Get referrer from URL string\n    if (getURLParameter(\"ref\")) {\n        $('form.form-email').append('<input type=\"text\" name=\"referrer\" class=\"hidden\" value=\"' + getURLParameter(\"ref\") + '\"/>');\n    }\n\n    function getURLParameter(name) {\n        return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [, \"\"])[1].replace(/\\+/g, '%20')) || null;\n    }\n\n    // Disable parallax on mobile\n\n    if ((/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i).test(navigator.userAgent || navigator.vendor || window.opera)) {\n        $('section').removeClass('parallax');\n    }\n\n    // Disqus Comments\n\n    if($('.disqus-comments').length){\n\t\t/* * * CONFIGURATION VARIABLES * * */\n\t\tvar disqus_shortname = $('.disqus-comments').attr('data-shortname');\n\n\t\t/* * * DON'T EDIT BELOW THIS LINE * * */\n\t\t(function() {\n\t\t\tvar dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\n\t\t\tdsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';\n\t\t\t(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n\t\t})();\n    }\n\n    // Load Google MAP API JS with callback to initialise when fully loaded\n    if(document.querySelector('[data-maps-api-key]') && !document.querySelector('.gMapsAPI')){\n        if($('[data-maps-api-key]').length){\n            var script = document.createElement('script');\n            var apiKey = $('[data-maps-api-key]:first').attr('data-maps-api-key');\n            script.type = 'text/javascript';\n            script.src = 'https://maps.googleapis.com/maps/api/js?key='+apiKey+'&callback=initializeMaps';\n            script.className = 'gMapsAPI';\n            document.body.appendChild(script);\n        }\n    }\n\n});\n\n$(window).load(function() {\n    \"use strict\";\n\n    // Initialize Masonry\n\n    if ($('.masonry').length) {\n        var container = document.querySelector('.masonry');\n        var msnry = new Masonry(container, {\n            itemSelector: '.masonry-item'\n        });\n\n        msnry.on('layoutComplete', function() {\n\n            mr_firstSectionHeight = $('.main-container section:nth-of-type(1)').outerHeight(true);\n\n            // Fix floating project filters to bottom of projects container\n\n            if ($('.filters.floating').length) {\n                setupFloatingProjectFilters();\n                updateFloatingFilters();\n                window.addEventListener(\"scroll\", updateFloatingFilters, false);\n            }\n\n            $('.masonry').addClass('fadeIn');\n            $('.masonry-loader').addClass('fadeOut');\n            if ($('.masonryFlyIn').length) {\n                masonryFlyIn();\n            }\n        });\n\n        msnry.layout();\n    }\n\n    // Initialize twitter feed\n\n    var setUpTweets = setInterval(function() {\n        if ($('.tweets-slider').find('li.flex-active-slide').length) {\n            clearInterval(setUpTweets);\n            return;\n        } else {\n            if ($('.tweets-slider').length) {\n                $('.tweets-slider').flexslider({\n                    directionNav: false,\n                    controlNav: false\n                });\n            }\n        }\n    }, 500);\n\n    mr_firstSectionHeight = $('.main-container section:nth-of-type(1)').outerHeight(true);\n\n\n});\n\nfunction updateNav() {\n\n    var scrollY = mr_scrollTop;\n\n    if (scrollY <= 0) {\n        if (mr_navFixed) {\n            mr_navFixed = false;\n            mr_nav.removeClass('fixed');\n        }\n        if (mr_outOfSight) {\n            mr_outOfSight = false;\n            mr_nav.removeClass('outOfSight');\n        }\n        if (mr_navScrolled) {\n            mr_navScrolled = false;\n            mr_nav.removeClass('scrolled');\n        }\n        return;\n    }\n\n    if (scrollY > mr_firstSectionHeight) {\n        if (!mr_navScrolled) {\n            mr_nav.addClass('scrolled');\n            mr_navScrolled = true;\n            return;\n        }\n    } else {\n        if (scrollY > mr_navOuterHeight) {\n            if (!mr_navFixed) {\n                mr_nav.addClass('fixed');\n                mr_navFixed = true;\n            }\n\n            if (scrollY > mr_navOuterHeight * 2) {\n                if (!mr_outOfSight) {\n                    mr_nav.addClass('outOfSight');\n                    mr_outOfSight = true;\n                }\n            } else {\n                if (mr_outOfSight) {\n                    mr_outOfSight = false;\n                    mr_nav.removeClass('outOfSight');\n                }\n            }\n        } else {\n            if (mr_navFixed) {\n                mr_navFixed = false;\n                mr_nav.removeClass('fixed');\n            }\n            if (mr_outOfSight) {\n                mr_outOfSight = false;\n                mr_nav.removeClass('outOfSight');\n            }\n        }\n\n        if (mr_navScrolled) {\n            mr_navScrolled = false;\n            mr_nav.removeClass('scrolled');\n        }\n\n    }\n}\n\nfunction capitaliseFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction masonryFlyIn() {\n    var $items = $('.masonryFlyIn .masonry-item');\n    var time = 0;\n\n    $items.each(function() {\n        var item = $(this);\n        setTimeout(function() {\n            item.addClass('fadeIn');\n        }, time);\n        time += 170;\n    });\n}\n\nfunction setupFloatingProjectFilters() {\n    mr_floatingProjectSections = [];\n    $('.filters.floating').closest('section').each(function() {\n        var section = $(this);\n\n        mr_floatingProjectSections.push({\n            section: section.get(0),\n            outerHeight: section.outerHeight(),\n            elemTop: section.offset().top,\n            elemBottom: section.offset().top + section.outerHeight(),\n            filters: section.find('.filters.floating'),\n            filersHeight: section.find('.filters.floating').outerHeight(true)\n        });\n    });\n}\n\nfunction updateFloatingFilters() {\n    var l = mr_floatingProjectSections.length;\n    while (l--) {\n        var section = mr_floatingProjectSections[l];\n\n        if ((section.elemTop < mr_scrollTop) && typeof window.mr_variant == \"undefined\" ) {\n            section.filters.css({\n                position: 'fixed',\n                top: '16px',\n                bottom: 'auto'\n            });\n            if (mr_navScrolled) {\n                section.filters.css({\n                    transform: 'translate3d(-50%,48px,0)'\n                });\n            }\n            if (mr_scrollTop > (section.elemBottom - 70)) {\n                section.filters.css({\n                    position: 'absolute',\n                    bottom: '16px',\n                    top: 'auto'\n                });\n                section.filters.css({\n                    transform: 'translate3d(-50%,0,0)'\n                });\n            }\n        } else {\n            section.filters.css({\n                position: 'absolute',\n                transform: 'translate3d(-50%,0,0)'\n            });\n        }\n    }\n}\n\nwindow.initializeMaps = function(){\n    if(typeof google !== \"undefined\"){\n        if(typeof google.maps !== \"undefined\"){\n            $('.map-canvas[data-maps-api-key]').each(function(){\n                    var mapInstance   = this,\n                        mapJSON       = typeof $(this).attr('data-map-style') !== \"undefined\" ? $(this).attr('data-map-style'): false,\n                        mapStyle      = JSON.parse(mapJSON) || [{\"featureType\":\"landscape\",\"stylers\":[{\"saturation\":-100},{\"lightness\":65},{\"visibility\":\"on\"}]},{\"featureType\":\"poi\",\"stylers\":[{\"saturation\":-100},{\"lightness\":51},{\"visibility\":\"simplified\"}]},{\"featureType\":\"road.highway\",\"stylers\":[{\"saturation\":-100},{\"visibility\":\"simplified\"}]},{\"featureType\":\"road.arterial\",\"stylers\":[{\"saturation\":-100},{\"lightness\":30},{\"visibility\":\"on\"}]},{\"featureType\":\"road.local\",\"stylers\":[{\"saturation\":-100},{\"lightness\":40},{\"visibility\":\"on\"}]},{\"featureType\":\"transit\",\"stylers\":[{\"saturation\":-100},{\"visibility\":\"simplified\"}]},{\"featureType\":\"administrative.province\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"},{\"lightness\":-25},{\"saturation\":-100}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#ffff00\"},{\"lightness\":-25},{\"saturation\":-97}]}],\n                        zoomLevel     = (typeof $(this).attr('data-map-zoom') !== \"undefined\" && $(this).attr('data-map-zoom') !== \"\") ? $(this).attr('data-map-zoom') * 1: 17,\n                        latlong       = typeof $(this).attr('data-latlong') != \"undefined\" ? $(this).attr('data-latlong') : false,\n                        latitude      = latlong ? 1 *latlong.substr(0, latlong.indexOf(',')) : false,\n                        longitude     = latlong ? 1 * latlong.substr(latlong.indexOf(\",\") + 1) : false,\n                        geocoder      = new google.maps.Geocoder(),\n                        address       = typeof $(this).attr('data-address') !== \"undefined\" ? $(this).attr('data-address').split(';'): false,\n                        markerTitle   = \"We Are Here\",\n                        isDraggable = $(document).width() > 766 ? true : false,\n                        map, marker, markerImage,\n                        mapOptions = {\n                            draggable: isDraggable,\n                            scrollwheel: false,\n                            zoom: zoomLevel,\n                            disableDefaultUI: true,\n                            styles: mapStyle\n                        };\n\n                    if($(this).attr('data-marker-title') != undefined && $(this).attr('data-marker-title') != \"\" )\n                    {\n                        markerTitle = $(this).attr('data-marker-title');\n                    }\n\n                    if(address != undefined && address[0] != \"\"){\n                            geocoder.geocode( { 'address': address[0].replace('[nomarker]','')}, function(results, status) {\n                                if (status == google.maps.GeocoderStatus.OK) {\n                                var map = new google.maps.Map(mapInstance, mapOptions);\n                                map.setCenter(results[0].geometry.location);\n\n                                address.forEach(function(address){\n                                    var markerGeoCoder;\n\n                                    markerImage = {url: window.mr_variant == undefined ? 'images/mapmarker.png' : '../images/mapmarker.png', size: new google.maps.Size(50,50), scaledSize: new google.maps.Size(50,50)};\n                                    if(/(\\-?\\d+(\\.\\d+)?),\\s*(\\-?\\d+(\\.\\d+)?)/.test(address) ){\n                                        var latlong = address.split(','),\n                                        marker = new google.maps.Marker({\n                                                        position: { lat: 1*latlong[0], lng: 1*latlong[1] },\n                                                        map: map,\n                                                        icon: markerImage,\n                                                        title: markerTitle,\n                                                        optimised: false\n                                                    });\n                                    }\n                                    else if(address.indexOf('[nomarker]') < 0){\n                                        markerGeoCoder = new google.maps.Geocoder();\n                                        markerGeoCoder.geocode( { 'address': address.replace('[nomarker]','')}, function(results, status) {\n                                            if (status == google.maps.GeocoderStatus.OK) {\n                                                marker = new google.maps.Marker({\n                                                    map: map,\n                                                    icon: markerImage,\n                                                    title: markerTitle,\n                                                    position: results[0].geometry.location,\n                                                    optimised: false\n                                                });\n                                            }\n                                        });\n                                    }\n\n                                });\n                            } else {\n                                console.log('There was a problem geocoding the address.');\n                            }\n                        });\n                    }\n                    else if(latitude != undefined && latitude != \"\" && latitude != false && longitude != undefined && longitude != \"\" && longitude != false ){\n                        mapOptions.center   = { lat: latitude, lng: longitude};\n                        map = new google.maps.Map(mapInstance, mapOptions);\n                        marker              = new google.maps.Marker({\n                                                    position: { lat: latitude, lng: longitude },\n                                                    map: map,\n                                                    icon: markerImage,\n                                                    title: markerTitle\n                                                });\n\n                    }\n\n                });\n        }\n    }\n}\ninitializeMaps();\n\n// End of Maps\n\n\n\n\n// Prepare Signup Form - It is used to retrieve form details from an iframe Mail Chimp or Campaign Monitor form.\n\nfunction prepareSignup(iFrame){\n    var form   = jQuery('<form />'),\n        action = iFrame.contents().find('form').attr('action');\n\n    // Alter action for a Mail Chimp-compatible ajax request url.\n    if(/list-manage\\.com/.test(action)){\n       action = action.replace('/post?', '/post-json?') + \"&c=?\";\n       if(action.substr(0,2) == \"//\"){\n           action = 'http:' + action;\n       }\n    }\n\n    // Alter action for a Campaign Monitor-compatible ajax request url.\n    if(/createsend\\.com/.test(action)){\n       action = action + '?callback=?';\n    }\n\n\n    // Set action on the form\n    form.attr('action', action);\n\n    // Clone form input fields from\n    iFrame.contents().find('input, select, textarea').not('input[type=\"submit\"]').each(function(){\n        $(this).clone().appendTo(form);\n\n    });\n\n    return form;\n\n\n}\n\n\n\n/*\\\n|*|  COOKIE LIBRARY THANKS TO MDN\n|*|\n|*|  A complete cookies reader/writer framework with full unicode support.\n|*|\n|*|  Revision #1 - September 4, 2014\n|*|\n|*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\n|*|  https://developer.mozilla.org/User:fusionchess\n|*|\n|*|  This framework is released under the GNU Public License, version 3 or later.\n|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\n|*|\n|*|  Syntaxes:\n|*|\n|*|  * mr_cookies.setItem(name, value[, end[, path[, domain[, secure]]]])\n|*|  * mr_cookies.getItem(name)\n|*|  * mr_cookies.removeItem(name[, path[, domain]])\n|*|  * mr_cookies.hasItem(name)\n|*|  * mr_cookies.keys()\n|*|\n\\*/\n\nvar mr_cookies = {\n  getItem: function (sKey) {\n    if (!sKey) { return null; }\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n  },\n  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n    if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\n    var sExpires = \"\";\n    if (vEnd) {\n      switch (vEnd.constructor) {\n        case Number:\n          sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\n          break;\n        case String:\n          sExpires = \"; expires=\" + vEnd;\n          break;\n        case Date:\n          sExpires = \"; expires=\" + vEnd.toUTCString();\n          break;\n      }\n    }\n    document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n    return true;\n  },\n  removeItem: function (sKey, sPath, sDomain) {\n    if (!this.hasItem(sKey)) { return false; }\n    document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\n    return true;\n  },\n  hasItem: function (sKey) {\n    if (!sKey) { return false; }\n    return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n  },\n  keys: function () {\n    var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\n    for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\n    return aKeys;\n  }\n};\n\n/*\\\n|*|  END COOKIE LIBRARY\n\\*/\n"],"file":"scripts.js","sourceRoot":"/source/"}